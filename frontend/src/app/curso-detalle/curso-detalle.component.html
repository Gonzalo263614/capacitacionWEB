<app-navbar></app-navbar>
<h2 class="form-title">Formación y Actualización Profesional Docente</h2>
<img src="TecNM.png" alt="Logo de la Institución" class="logo">
<h2>Detalles del Curso</h2>
<button (click)="toggleCurso()">
  {{ showCurso ? 'Ocultar detalles' : 'Mostrar detalles' }}
</button>

<!-- Se muestran los detalles del curso solo si showCurso es verdadero -->
<div *ngIf="showCurso && curso">
  <p><strong>Nombre del curso:</strong> {{ curso.nombre_curso }}</p>
  <p><strong>Periodo:</strong> {{ curso.periodo }}</p>
  <p><strong>Fecha de inicio:</strong> {{ curso.fecha_inicio | date }}</p>
  <p><strong>Fecha de fin:</strong> {{ curso.fecha_fin | date }}</p>
</div>

<h2>Maestros Inscritos</h2>
<button (click)="toggleMaestros()">
  {{ showMaestros ? 'Ocultar pase de lista' : 'Pase de lista ' }}
</button>

<h2>Enviar archivos</h2>
<form>
  <label for="file">Seleccionar archivo:</label>
  <input type="file" (change)="onFileSelected($event)">
  <button type="button" (click)="onSubmit()">Subir archivo</button>
</form>

<!-- Tabla para mostrar maestros solo si showMaestros es verdadero -->
<div *ngIf="showMaestros">
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido Paterno</th>
        <th>Apellido Materno</th>
        <th>Email</th>
        <th>Asistencia</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let maestro of maestros">
        <td>{{ maestro.nombre }}</td>
        <td>{{ maestro.apellidopaterno }}</td>
        <td>{{ maestro.apellidomaterno }}</td>
        <td>{{ maestro.email }}</td>
        <td>
          <input type="checkbox" [(ngModel)]="maestro.asistio" />
        </td>
      </tr>
    </tbody>
  </table>
  <button (click)="verificarAsistenciaYaPasada()">Guardar Asistencias</button>
</div>

<p *ngIf="maestros.length === 0 && showMaestros">No hay maestros inscritos en este curso.</p>
<p *ngIf="error" class="error">{{ error }}</p>
<!-- Nuevo botón para mostrar la sección de calificaciones -->
<button (click)="toggleCalificaciones()">
  {{ showCalificaciones ? 'Ocultar Calificaciones' : 'Agregar Calificaciones' }}
</button>

<!-- Nueva sección para agregar calificaciones -->
<div *ngIf="showCalificaciones">
  <h2>Agregar Calificaciones</h2>
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Calificación</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let maestro of maestros">
        <td>{{ maestro.nombre }}</td>
        <td>
          <input type="number" [(ngModel)]="maestro.calificacion" placeholder="Calificación" />
        </td>
        <td>
          <button (click)="guardarCalificacion(maestro.id)">Agregar Calificación</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
