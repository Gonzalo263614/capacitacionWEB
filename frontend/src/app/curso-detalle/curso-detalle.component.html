<app-navbar></app-navbar>

<h2 class="form-title">Formación y Actualización Profesional Docente</h2>
<img src="TecNM.png" alt="Logo de la Institución" class="logo">

<h2 class="section-title">Detalles del Curso</h2>
<button (click)="toggleCurso()" class="toggle-button">
  {{ showCurso ? 'Ocultar detalles' : 'Mostrar detalles' }}
</button>

<!-- Se muestran los detalles del curso solo si showCurso es verdadero -->
<div *ngIf="showCurso && curso" class="course-details">
  <p><strong>Nombre del curso:</strong> {{ curso.nombre_curso }}</p>
  <p><strong>Periodo:</strong> {{ curso.periodo }}</p>
  <p><strong>Fecha de inicio:</strong> {{ curso.fecha_inicio | date }}</p>
  <p><strong>Fecha de fin:</strong> {{ curso.fecha_fin | date }}</p>
</div>

<h2 class="section-title">Maestros Inscritos</h2>
<button (click)="toggleMaestros()" class="toggle-button">
  {{ showMaestros ? 'Ocultar pase de lista' : 'Pase de lista' }}
</button>

<!-- Tabla para mostrar maestros solo si showMaestros es verdadero -->
<div *ngIf="showMaestros" class="maestros-list">
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido Paterno</th>
        <th>Apellido Materno</th>
        <th>Email</th>
        <th>Asistencia</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let maestro of maestros">
        <td>{{ maestro.nombre }}</td>
        <td>{{ maestro.apellidopaterno }}</td>
        <td>{{ maestro.apellidomaterno }}</td>
        <td>{{ maestro.email }}</td>
        <td>
          <input type="checkbox" [(ngModel)]="maestro.asistio" />
        </td>
      </tr>
    </tbody>
  </table>
  <button (click)="verificarAsistenciaYaPasada()" class="save-button">Guardar Asistencias</button>
</div>

<p *ngIf="maestros.length === 0 && showMaestros" class="no-maestros">No hay maestros inscritos en este curso.</p>
<p *ngIf="error" class="error">{{ error }}</p>

<!-- Nuevo botón para mostrar la sección de calificaciones -->
<button (click)="toggleCalificaciones()" class="toggle-button">
  {{ showCalificaciones ? 'Ocultar Calificaciones' : 'Agregar Calificaciones' }}
</button>

<!-- Nueva sección para agregar calificaciones -->
<div *ngIf="showCalificaciones" class="calificaciones-section">
  <h2 class="section-title">Agregar Calificaciones</h2>
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido Paterno</th>
        <th>Apellido Materno</th>
        <th>Calificación</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let maestro of maestros">
        <td>{{ maestro.nombre }}</td>
        <td>{{ maestro.apellidopaterno }}</td>
        <td>{{ maestro.apellidomaterno }}</td>
        <td>
          <input type="number" [(ngModel)]="maestro.calificacion" placeholder="Calificación" />
        </td>
      </tr>
    </tbody>
  </table>
  <button (click)="guardarTodasLasCalificaciones()" class="save-button">Enviar Todas las Calificaciones</button>
</div>


<h2 class="section-title">Enviar archivos</h2>
<form class="file-upload-form">
  <label for="file">Seleccionar archivo:</label>
  <input type="file" (change)="onFileSelected($event)">
  <button type="button" (click)="onSubmit()" class="upload-button">Subir archivo</button>
</form>
